services:
  google_agents_mariadb:
    image: mariadb:11.4
    container_name: agent_mariadb
    environment:
      MYSQL_ROOT_PASSWORD: root_password
      MYSQL_DATABASE: agent_db
      MYSQL_USER: agent_user
      MYSQL_PASSWORD: agent_password
    ports:
      - "3307:3306" # Avoid conflict with local MariaDB if running
    volumes:
      - mariadb_data:/var/lib/mysql
    networks:
      - agent_network

  google_agents_frontend:
    build:
      context: ./docker/frontend
      dockerfile: Dockerfile
    container_name: agent_frontend
    env_file:
      - ./docker/frontend/frontend.env
    volumes:
      - ./src:/app/src
    depends_on:
      - google_agents_mariadb
    networks:
      - agent_network

networks:
  agent_network:
    driver: bridge

volumes:
  mariadb_data:
